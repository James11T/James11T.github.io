(this.webpackJsonpmineswepper=this.webpackJsonpmineswepper||[]).push([[0],{15:function(e,i,t){},17:function(e,i,t){"use strict";t.r(i);var n=t(7),a=t.n(n),r=(t(15),t(1)),l=t.n(r),u=t(5),c=t(2),o=t(8),s=t(9),d=Object(o.a)((function e(i){Object(s.a)(this,e),this.isMine=void 0,this.isFlagged=void 0,this.isRevealed=void 0,this.value=void 0,this.isMine=i,this.isFlagged=!1,this.isRevealed=!1,this.value=null})),f={easy:{grid:[[]],mineCount:10,width:10,height:8,hasFailed:!1,hasWon:!1,difficulty:"easy",flagCount:0,minesSet:!1},medium:{grid:[[]],mineCount:40,width:18,height:14,hasFailed:!1,hasWon:!1,difficulty:"medium",flagCount:0,minesSet:!1},hard:{grid:[[]],mineCount:99,width:24,height:20,hasFailed:!1,hasWon:!1,difficulty:"hard",flagCount:0,minesSet:!1}},h=function(e,i,t){return i<0||i>=e.length||t<0||t>=e[i].length?null:e[i][t]},m=function(e){e.forEach((function(i,t){i.forEach((function(i,n){i.value=function(e,i,t){if(e[i][t].isMine)return null;for(var n=0,a=-1;a<=1;a++)for(var r=-1;r<=1;r++)if(0!==a||0!==r){var l=h(e,i+a,t+r);l&&l.isMine&&n++}return n}(e,t,n)}))}))},g=function e(i,t,n){for(var a=-1;a<=1;a++)for(var r=-1;r<=1;r++)if(0!==a||0!==r){var l=h(i,t+a,n+r);l&&(l.isMine||l.isRevealed||(l.isRevealed=!0,l.value||e(i,t+a,n+r)))}},b=function(e,i){switch(i.type){case"reset":var t=i.difficulty||e.difficulty,n=f[t],a=function(e,i){for(var t=[],n=0;n<e;n++){for(var a=[],r=0;r<i;r++)a.push(new d(!1));t.push(a)}return t}(n.width,n.height);return Object(c.a)(Object(c.a)({},n),{},{grid:a});case"reveal":e.minesSet||function(e,i,t,n){for(var a=0;a<i;){var r=Math.floor(Math.random()*e.length),l=Math.floor(Math.random()*e[r].length);Math.abs(r-t)<=1&&Math.abs(l-n)<=1||e[r][l].isMine||(e[r][l].isMine=!0,a++)}m(e)}(e.grid,e.mineCount,i.x,i.y);var r=e.grid[i.x][i.y];if(r.isFlagged)return e;if(r.isRevealed=!0,r.isMine)return Object(c.a)(Object(c.a)({},e),{},{hasFailed:!0});r.value||g(e.grid,i.x,i.y);var l=function(e){var i=0;return e.forEach((function(e){e.forEach((function(e){e.isRevealed&&i++}))})),i}(e.grid)===e.width*e.height-e.mineCount;return Object(c.a)(Object(c.a)({},e),{},{hasWon:l,minesSet:!0});case"flag":var u=e.grid[i.x][i.y];return u.isRevealed?e:(u.isFlagged=!u.isFlagged,u.isFlagged?Object(c.a)(Object(c.a)({},e),{},{flagCount:e.flagCount+1}):Object(c.a)(Object(c.a)({},e),{},{flagCount:e.flagCount-1}))}},v=function(){var e=l.a.useReducer(b,f.easy),i=Object(u.a)(e,2),t=i[0],n=i[1],a=l.a.useCallback((function(e){return n({type:"reset",difficulty:e||t.difficulty})}),[t.difficulty]),r=l.a.useCallback((function(e,i){return n({type:"reveal",x:e,y:i})}),[]),c=l.a.useCallback((function(e,i){return n({type:"flag",x:e,y:i})}),[]);return{gameState:t,resetGame:a,revealTile:r,flagTile:c}},j=t(10),_=t.n(j),p=t(3),O=t.n(p),x=t(0),y=function(e){var i,t,n=e.tile,a=e.onClick,r=e.onRightClick,c=l.a.useState(!1),o=Object(u.a)(c,2),s=o[0],d=o[1],f=l.a.useRef(null),h=function(){d(!0),f.current=window.setTimeout((function(){m(!0)}),300)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(s||e)&&(f.current&&window.clearTimeout(f.current),e?r():a(),d(!1))};return n.isRevealed?n.value?(i=n.value.toString(),t=O.a["tile-number-".concat(n.value)]):(i="",t=O.a.clear):n.isFlagged?(i="\u2691",t=O.a.flag):(i="",t=O.a.blank),Object(x.jsx)("div",{className:_()(O.a.tile,t,n.isMine&&n.isRevealed&&O.a.mine,n.isMine&&false),onMouseDown:function(e){return 0===e.button&&h()},onTouchStart:function(){return h()},onMouseUp:function(e){return 0===e.button&&m()},onTouchEnd:function(){return m()},onMouseLeave:function(){return m()},onContextMenu:function(e){e.preventDefault(),r()},children:i})},C=t(4),M=t.n(C),T=function(e){var i=e.resetGame,t=e.children;return Object(x.jsxs)("div",{className:M.a.overlay,children:[Object(x.jsx)("h1",{children:t}),Object(x.jsx)("button",{onClick:function(){return i()},children:"Restart"})]})},G=function(e){var i,t=e.gameState,n=e.onTileClick,a=e.onTileRightClick,r=e.resetGame;return Object(x.jsxs)("div",{className:M.a.gameArea,children:[Object(x.jsxs)("div",{className:M.a.gameData,children:[Object(x.jsx)("h1",{children:"Mineswepper"}),Object(x.jsxs)("div",{children:["Difficulty: ",(i=t.difficulty,i.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()})))]}),Object(x.jsxs)("div",{children:["\u2691 Mines left: ",t.mineCount-t.flagCount]}),Object(x.jsx)("div",{className:M.a.spacer}),Object(x.jsxs)("select",{name:"difficulty",id:"difficultySelector",onChange:function(e){var i=e.target.value;"easy"!==i&&"medium"!==i&&"hard"!==i||r(i)},children:[Object(x.jsx)("option",{value:"easy",children:"Easy"}),Object(x.jsx)("option",{value:"medium",children:"Medium"}),Object(x.jsx)("option",{value:"hard",children:"Hard"})]}),Object(x.jsx)("button",{onClick:function(){return r()},children:"Reset"})]}),Object(x.jsxs)("div",{className:M.a.grid,children:[t.grid.map((function(e,i){return Object(x.jsx)("div",{className:M.a.column,children:e.map((function(e,t){return Object(x.jsx)(y,{tile:e,onClick:function(){return n(i,t)},onRightClick:function(){return a(i,t)}},"".concat(i,",").concat(t))}))},i)})),t.hasFailed&&Object(x.jsx)(T,{resetGame:r,children:"You Failed!"}),t.hasWon&&Object(x.jsx)(T,{resetGame:r,children:"You Won!"})]})]})};var k=function(){var e=v(),i=e.gameState,t=e.resetGame,n=e.revealTile,a=e.flagTile;return l.a.useEffect((function(){t()}),[t]),Object(x.jsx)(G,{gameState:i,onTileClick:function(e,i){n(e,i)},onTileRightClick:function(e,i){a(e,i)},resetGame:t})},w=document.getElementById("root");a.a.render(Object(x.jsx)(k,{}),w)},3:function(e,i,t){e.exports={tile:"GridTile_tile__2Aa7x",flag:"GridTile_flag__3xm2t",blank:"GridTile_blank__3a3N0","tile-number-1":"GridTile_tile-number-1__YJKR9","tile-number-2":"GridTile_tile-number-2__2dJae","tile-number-3":"GridTile_tile-number-3__8f8Vt","tile-number-4":"GridTile_tile-number-4__f2pGo","tile-number-5":"GridTile_tile-number-5__14Nay","tile-number-6":"GridTile_tile-number-6__3hvkW","tile-number-7":"GridTile_tile-number-7__1cN0b","tile-number-8":"GridTile_tile-number-8__hiP61",mine:"GridTile_mine__3FNYX",debugMine:"GridTile_debugMine__LjcBo"}},4:function(e,i,t){e.exports={grid:"Board_grid__BrGsz",column:"Board_column__1ioUg",overlay:"Board_overlay__2PJCg",gameArea:"Board_gameArea__27p4E",gameData:"Board_gameData__pIe6L",spacer:"Board_spacer__1pQ7B"}}},[[17,1,2]]]);
//# sourceMappingURL=main.c546ba83.chunk.js.map